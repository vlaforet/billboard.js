/*!
 * Copyright (c) 2017 ~ present NAVER Corp.
 * billboard.js project is licensed under the MIT license
 *
 * billboard.js, JavaScript chart library
 * https://naver.github.io/billboard.js/
 *
 * @version 3.11.3
 * @requires billboard.js
 * @summary billboard.js plugin
 */(function(h,g){typeof exports=="object"&&typeof module=="object"?module.exports=g(require("d3-brush"),require("d3-selection")):typeof define=="function"&&define.amd?define("bb",["d3-brush","d3-selection"],g):typeof exports=="object"?exports.bb=g(require("d3-brush"),require("d3-selection")):(h.bb=h.bb||{},h.bb.plugin=h.bb.plugin||{},h.bb.plugin.sparkline=g(h.d3,h.d3))})(this,function(C,h){return function(){"use strict";var g={853:function(a){a.exports=C},747:function(a){a.exports=h}},R={};function p(a){var b=R[a];if(b!==void 0)return b.exports;var d=R[a]={exports:{}};return g[a](d,d.exports,p),d.exports}(function(){p.d=function(a,b){for(var d in b)p.o(b,d)&&!p.o(a,d)&&Object.defineProperty(a,d,{enumerable:!0,get:b[d]})}})(),function(){p.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)}}();var v={};return function(){p.d(v,{default:function(){return B}});var a=Object.defineProperty,b=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable,I=(e,t,n)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,l=(e,t)=>{for(var n in t||(t={}))d.call(t,n)&&I(e,n,t[n]);if(b)for(var n of b(t))q.call(t,n)&&I(e,n,t[n]);return e};const S={button:"bb-button",chart:"bb-chart",empty:"bb-empty",main:"bb-main",target:"bb-target",EXPANDED:"_expanded_"},k={arc:"bb-arc",arcLabelLine:"bb-arc-label-line",arcRange:"bb-arc-range",arcs:"bb-arcs",chartArc:"bb-chart-arc",chartArcs:"bb-chart-arcs",chartArcsBackground:"bb-chart-arcs-background",chartArcsTitle:"bb-chart-arcs-title",needle:"bb-needle"},H={area:"bb-area",areas:"bb-areas"},U={axis:"bb-axis",axisX:"bb-axis-x",axisXLabel:"bb-axis-x-label",axisY:"bb-axis-y",axisY2:"bb-axis-y2",axisY2Label:"bb-axis-y2-label",axisYLabel:"bb-axis-y-label",axisXTooltip:"bb-axis-x-tooltip",axisYTooltip:"bb-axis-y-tooltip",axisY2Tooltip:"bb-axis-y2-tooltip"},X={bar:"bb-bar",bars:"bb-bars",chartBar:"bb-chart-bar",chartBars:"bb-chart-bars"},Y={candlestick:"bb-candlestick",candlesticks:"bb-candlesticks",chartCandlestick:"bb-chart-candlestick",chartCandlesticks:"bb-chart-candlesticks",valueDown:"bb-value-down",valueUp:"bb-value-up"},V={chartCircles:"bb-chart-circles",circle:"bb-circle",circles:"bb-circles"},G={colorPattern:"bb-color-pattern",colorScale:"bb-colorscale"},z={dragarea:"bb-dragarea",INCLUDED:"_included_"},W={funnel:"bb-funnel",chartFunnel:"bb-chart-funnel",chartFunnels:"bb-chart-funnels",funnelBackground:"bb-funnel-background"},K={chartArcsGaugeMax:"bb-chart-arcs-gauge-max",chartArcsGaugeMin:"bb-chart-arcs-gauge-min",chartArcsGaugeUnit:"bb-chart-arcs-gauge-unit",chartArcsGaugeTitle:"bb-chart-arcs-gauge-title",gaugeValue:"bb-gauge-value"},Z={legend:"bb-legend",legendBackground:"bb-legend-background",legendItem:"bb-legend-item",legendItemEvent:"bb-legend-item-event",legendItemHidden:"bb-legend-item-hidden",legendItemPoint:"bb-legend-item-point",legendItemTile:"bb-legend-item-tile"},J={chartLine:"bb-chart-line",chartLines:"bb-chart-lines",line:"bb-line",lines:"bb-lines"},Q={eventRect:"bb-event-rect",eventRects:"bb-event-rects",eventRectsMultiple:"bb-event-rects-multiple",eventRectsSingle:"bb-event-rects-single"},ee={focused:"bb-focused",defocused:"bb-defocused",legendItemFocused:"bb-legend-item-focused",xgridFocus:"bb-xgrid-focus",ygridFocus:"bb-ygrid-focus"},te={grid:"bb-grid",gridLines:"bb-grid-lines",xgrid:"bb-xgrid",xgridLine:"bb-xgrid-line",xgridLines:"bb-xgrid-lines",xgrids:"bb-xgrids",ygrid:"bb-ygrid",ygridLine:"bb-ygrid-line",ygridLines:"bb-ygrid-lines",ygrids:"bb-ygrids"},Le={level:"bb-level",levels:"bb-levels"},ne={chartRadar:"bb-chart-radar",chartRadars:"bb-chart-radars"},re={region:"bb-region",regions:"bb-regions"},ie={selectedCircle:"bb-selected-circle",selectedCircles:"bb-selected-circles",SELECTED:"_selected_"},se={shape:"bb-shape",shapes:"bb-shapes"},oe={brush:"bb-brush",subchart:"bb-subchart"},ce={chartText:"bb-chart-text",chartTexts:"bb-chart-texts",text:"bb-text",texts:"bb-texts",title:"bb-title",TextOverlapping:"text-overlapping"},le={tooltip:"bb-tooltip",tooltipContainer:"bb-tooltip-container",tooltipName:"bb-tooltip-name"},ae={treemap:"bb-treemap",chartTreemap:"bb-chart-treemap",chartTreemaps:"bb-chart-treemaps"},ue={buttonZoomReset:"bb-zoom-reset",zoomBrush:"bb-zoom-brush"};var De=l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l(l({},S),k),H),U),X),Y),V),G),z),K),Z),J),Q),ee),W),te),ne),re),ie),se),oe),ce),le),ae),ue),Me=p(853),Fe=p(747);function be(){return typeof globalThis=="object"&&globalThis!==null&&globalThis.Object===Object&&globalThis||typeof global=="object"&&global!==null&&global.Object===Object&&global||typeof self=="object"&&self!==null&&self.Object===Object&&self||Function("return this")()}function de(e){const t=typeof(e==null?void 0:e.requestAnimationFrame)=="function"&&typeof(e==null?void 0:e.cancelAnimationFrame)=="function",n=typeof(e==null?void 0:e.requestIdleCallback)=="function"&&typeof(e==null?void 0:e.cancelIdleCallback)=="function",r=s=>setTimeout(s,1),i=s=>clearTimeout(s);return[t?e.requestAnimationFrame:r,t?e.cancelAnimationFrame:i,n?e.requestIdleCallback:r,n?e.cancelIdleCallback:i]}const _=be(),fe=_==null?void 0:_.document,[je,Ne,Be,qe]=de(_);var he=Object.defineProperty,L=Object.getOwnPropertySymbols,pe=Object.prototype.hasOwnProperty,ge=Object.prototype.propertyIsEnumerable,D=(e,t,n)=>t in e?he(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,M=(e,t)=>{for(var n in t||(t={}))pe.call(t,n)&&D(e,n,t[n]);if(L)for(var n of L(t))ge.call(t,n)&&D(e,n,t[n]);return e};const ke=e=>e||e===0,me=e=>typeof e=="function",y=e=>typeof e=="string",$=e=>typeof e=="number",ve=e=>typeof e=="undefined",F=e=>typeof e!="undefined",He=e=>typeof e=="boolean",Ue=e=>Math.ceil(e/10)*10,Xe=e=>Math.ceil(e)+.5,Ye=e=>e[1]-e[0],E=e=>typeof e=="object",_e=e=>ve(e)||e===null||y(e)&&e.length===0||E(e)&&!(e instanceof Date)&&Object.keys(e).length===0||$(e)&&isNaN(e),ye=e=>!_e(e),w=e=>Array.isArray(e),x=e=>e&&!(e!=null&&e.nodeType)&&E(e)&&!w(e);function Ve(e,t,n){return F(e[t])?e[t]:n}function Ge(e,t){let n=!1;return Object.keys(e).forEach(r=>e[r]===t&&(n=!0)),n}function ze(e,t,...n){const r=me(e);return r&&e.call(t,...n),r}function We(e,t){let n=0;const r=function(...i){!--n&&t.apply(this,...i)};"duration"in e?e.each(()=>++n).on("end",r):(++n,e.call(r))}function Ke(e){return y(e)?e.replace(/<(script|img)?/ig,"&lt;").replace(/(script)?>/ig,"&gt;"):e}function Ze(e,t,n=[-1,1],r=!1){if(!(!e||!y(t)))if(t.indexOf(`
`)===-1)e.text(t);else{const i=[e.text(),t].map(s=>s.replace(/[\s\n]/g,""));if(i[0]!==i[1]){const s=t.split(`
`),o=r?s.length-1:1;e.html(""),s.forEach((c,u)=>{e.append("tspan").attr("x",0).attr("dy",`${u===0?n[0]*o:n[1]}em`).text(c)})}}}function xe(e){const{x:t,y:n,width:r,height:i}=e.getBBox();return[{x:t,y:n+i},{x:t,y:n},{x:t+r,y:n},{x:t+r,y:n+i}]}function Je(e){const{width:t,height:n}=e.getBoundingClientRect(),r=xe(e),i=r[0].x,s=Math.min(r[0].y,r[1].y);return{x:i,y:s,width:t,height:n}}function Qe(e,t){var n;const r=e&&((n=e.touches||e.sourceEvent&&e.sourceEvent.touches)==null?void 0:n[0]);let i=[0,0];try{i=d3Pointer(r||e,t)}catch(s){}return i.map(s=>isNaN(s)?0:s)}function $e(e){const{event:t,$el:n}=e,r=n.subchart.main||n.main;let i;return t&&t.type==="brush"?i=t.selection:r&&(i=r.select(".bb-brush").node())&&(i=d3BrushSelection(i)),i}function et(e){return!("rect"in e)||"rect"in e&&e.hasAttribute("width")&&e.rect.width!==+e.getAttribute("width")?e.rect=e.getBoundingClientRect():e.rect}function tt(e=!0,t=0,n=1e4){const r=window.crypto||window.msCrypto,i=r?t+r.getRandomValues(new Uint32Array(1))[0]%(n-t+1):Math.floor(Math.random()*(n-t)+t);return e?String(i):i}function j(e,t,n,r,i){if(n>r)return-1;const s=Math.floor((n+r)/2);let{x:o,w:c=0}=e[s];return i&&(o=e[s].y,c=e[s].h),t>=o&&t<=o+c?s:t<o?j(e,t,n,s-1,i):j(e,t,s+1,r,i)}function nt(e){const t=$e(e);return t?t[0]===t[1]:!0}function rt(...e){const t=n=>{if(x(n)&&n.constructor){const r=new n.constructor;for(const i in n)r[i]=t(n[i]);return r}return n};return e.map(n=>t(n)).reduce((n,r)=>M(M({},n),r))}function Ee(e={},t){w(t)&&t.forEach(n=>Ee(e,n));for(const n in t)/^\d+$/.test(n)||n in e||(e[n]=t[n]);return e}const it=e=>e.charAt(0).toUpperCase()+e.slice(1);function st(e,t="-"){return e.split(t).map((n,r)=>r?n.charAt(0).toUpperCase()+n.slice(1).toLowerCase():n.toLowerCase()).join("")}const we=e=>[].slice.call(e);function ot(e,t,n){const{rootSelector:r="",sheet:i}=e,o=`${r} ${(c=>c.replace(/\s?(bb-)/g,".$1").replace(/\.+/g,"."))(t)} {${n.join(";")}}`;return i[i.insertRule?"insertRule":"addRule"](o,i.cssRules.length)}function ct(e){let t=[];return e.forEach(n=>{var r;try{n.cssRules&&n.cssRules.length&&(t=t.concat(we(n.cssRules)))}catch(i){(r=window.console)==null||r.warn(`Error while reading rules from ${n.href}: ${i.toString()}`)}}),t}function lt(e){var t,n,r,i;return{x:((n=(t=window.pageXOffset)!=null?t:window.scrollX)!=null?n:0)+e.scrollLeft,y:((i=(r=window.pageYOffset)!=null?r:window.scrollY)!=null?i:0)+e.scrollTop}}function at(e){const t=e?e.transform:null,n=t&&t.baseVal;return n&&n.numberOfItems?n.getItem(0).matrix:{a:0,b:0,c:0,d:0,e:0,f:0}}function ut(e){const t=e[0]instanceof Date,n=(t?e.map(Number):e).filter((r,i,s)=>s.indexOf(r)===i);return t?n.map(r=>new Date(r)):n}function bt(e){return e&&e.length?e.reduce((t,n)=>t.concat(n)):[]}function O(e,...t){if(!t.length||t.length===1&&!t[0])return e;const n=t.shift();return x(e)&&x(n)&&Object.keys(n).forEach(r=>{const i=n[r];x(i)?(!e[r]&&(e[r]={}),e[r]=O(e[r],i)):e[r]=w(i)?i.concat():i}),O(e,...t)}function Oe(e,t=!0){let n;return e[0]instanceof Date?n=t?(r,i)=>r-i:(r,i)=>i-r:t&&!e.every(isNaN)?n=(r,i)=>r-i:t||(n=(r,i)=>r>i&&-1||r<i&&1||r===i&&0),e.concat().sort(n)}function dt(e,t){let n=t.filter(r=>ye(r));return n.length?$(n[0])?n=Math[e](...n):n[0]instanceof Date&&(n=Oe(n,e==="min")[0]):n=void 0,n}const ft=(e,t,n=1)=>{const r=[],i=Math.max(0,Math.ceil((t-e)/n))|0;for(let s=e;s<i;s++)r.push(e+s*n);return r},ht={mouse:(()=>{const e=()=>({bubbles:!1,cancelable:!1,screenX:0,screenY:0,clientX:0,clientY:0});try{return new MouseEvent("t"),(t,n,r=e())=>{t.dispatchEvent(new MouseEvent(n,r))}}catch(t){return(n,r,i=e())=>{const s=fe.createEvent("MouseEvent");s.initMouseEvent(r,i.bubbles,i.cancelable,_,0,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),n.dispatchEvent(s)}}})(),touch:(e,t,n)=>{const r=new Touch(O({identifier:Date.now(),target:e,radiusX:2.5,radiusY:2.5,rotationAngle:10,force:.5},n));e.dispatchEvent(new TouchEvent(t,{cancelable:!0,bubbles:!0,shiftKey:!0,touches:[r],targetTouches:[],changedTouches:[r]}))}};function pt(e,t){let n=e;for(const r in t)n=n.replace(new RegExp(`{=${r}}`,"g"),t[r]);return n}function gt(e){var t;let n;if(e instanceof Date)n=e;else if(y(e)){const{config:r,format:i}=this;n=(t=i.dataTime(r.data_xFormat)(e))!=null?t:new Date(e)}else $(e)&&!isNaN(e)&&(n=new Date(+e));return(!n||isNaN(+n))&&console&&console.error&&console.error(`Failed to parse x '${e}' to Date object`),n}function mt(){var e,t;return((e=document)==null?void 0:e.hidden)===!1||((t=document)==null?void 0:t.visibilityState)==="visible"}function vt(e,t){const{DocumentTouch:n,matchMedia:r,navigator:i}=window;let s=!1;if(t)if(i&&"maxTouchPoints"in i)s=i.maxTouchPoints>0;else if("ontouchmove"in window||n&&document instanceof n)s=!0;else if(r!=null&&r("(pointer:coarse)").matches)s=!0;else{const c=i.userAgent;s=/\b(BlackBerry|webOS|iPhone|IEMobile)\b/i.test(c)||/\b(Android|Windows Phone|iPad|iPod)\b/i.test(c)}return e&&["any-hover:hover","any-pointer:fine"].some(c=>r==null?void 0:r(`(${c})`).matches)&&"mouse"||s&&"touch"||"mouse"}function Te(e,t){t()===!1?requestAnimationFrame(()=>Te(e,t)):e()}function Ae(e){const t=this.config;let n,r,i;const s=()=>{const o=r.shift();if(o&&n&&E(n)&&o in n)return n=n[o],s();if(!o)return n};Object.keys(t).forEach(o=>{n=e,r=o.split("_"),i=s(),F(i)&&(t[o]=i)}),this.api&&(this.state.orgConfig=e)}var Pe=Object.defineProperty,Ce=(e,t,n)=>t in e?Pe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,T=(e,t,n)=>(Ce(e,typeof t!="symbol"?t+"":t,n),n);class N{constructor(t={}){T(this,"$$"),T(this,"options"),this.options=t}$beforeInit(){}$init(){}$afterInit(){}$redraw(){}$willDestroy(){Object.keys(this).forEach(t=>{this[t]=null,delete this[t]})}}T(N,"version","3.11.3");class Re{constructor(){return{selector:void 0}}}var Ie=Object.defineProperty,Se=(e,t,n)=>t in e?Ie(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,A=(e,t,n)=>(Se(e,typeof t!="symbol"?t+"":t,n),n);class B extends N{constructor(t){return super(t),A(this,"config"),A(this,"element"),this.config=new Re,this}$beforeInit(){Ae.call(this,this.options),this.validate(),this.element=[].slice.call(document.querySelectorAll(this.config.selector)),this.overrideInternals(),this.overrideOptions(),this.overHandler=this.overHandler.bind(this),this.moveHandler=this.moveHandler.bind(this),this.outHandler=this.outHandler.bind(this)}validate(){const{$$:t,config:n}=this;let r="";if((!n.selector||!document.querySelector(n.selector))&&(r="No holder elements found from given selector option."),(t.hasType("bubble")||t.hasType("scatter")||t.hasArcType(t.data.targets))&&(r="Contains non supported chart types."),r)throw new Error(`[Sparkline plugin] ${r}`)}overrideInternals(){const{$$:t}=this,{getBarW:n,getIndices:r}=t;t.getIndices=function(i,s,o){return o==="getShapeX"?{}:r.call(this,i,s)},t.getBarW=function(i,s){return n.call(this,i,s,1)}}overrideOptions(){const{config:t}=this.$$;if(t.legend_show=!1,t.resize_auto=!1,t.axis_x_show=!1,t.padding!==!1){const n=r=>Object.keys(r||{}).length>0;n(t.axis_x_padding)&&(t.axis_x_padding={left:15,right:15,unit:"px"}),n(t.axis_y_padding)&&(t.axis_y_padding=5)}t.axis_y_show=!1,t.tooltip_position||(t.tooltip_position=function(n,r,i){const{internal:{state:{event:s}}}=this;let o=s.pageY-i*1.35,c=s.pageX-r/2;return o<0&&(o=0),c<0&&(c=0),{top:o,left:c}})}$init(){var t;const{$$:{$el:n}}=this;n.chart.style("width","0").style("height","0").style("pointer-events","none"),(t=n.tooltip)!=null&&t.node()&&document.body.appendChild(n.tooltip.node())}$afterInit(){const{$$:t}=this;t.$el.svg.attr("style",null).style("width","0").style("height","0"),this.bindEvents(!0)}bindEvents(t=!0){const{$$:{config:n}}=this;if(n.interaction_enabled&&n.tooltip_show){const r=`${t?"add":"remove"}EventListener`;this.element.forEach(i=>{const s=i.querySelector("svg");s[r]("mouseover",this.overHandler),s[r]("mousemove",this.moveHandler),s[r]("mouseout",this.outHandler)})}}overHandler(t){const{$$:n}=this,{state:{eventReceiver:r}}=n;r.rect=t.target.getBoundingClientRect()}moveHandler(t){var n,r,i,s;const{$$:o}=this,c=o.getDataIndexFromEvent(t),u=(n=o.api.data(t.target.__id))==null?void 0:n[0],f=(r=u==null?void 0:u.values)==null?void 0:r[c];f&&!f.name&&(f.name=f.id),o.state.event=t,(i=o.isPointFocusOnly)!=null&&i.call(o)&&f&&((s=o.showCircleFocus)==null||s.call(o,[f])),o.setExpand(c,u.id,!0),o.showTooltip([f],t.target)}outHandler(t){const{$$:n}=this;n.state.event=t,n.isPointFocusOnly()?n.hideCircleFocus():n.unexpandCircles(),n.hideTooltip()}$redraw(){var t;const{$$:n}=this,{$el:r}=n;let i=this.element;const s=n.api.data(),o=(t=r.chart.html().match(/<svg[^>]*>/))==null?void 0:t[0];if(i.length<s.length){const c=r.chart.node();for(let u=s.length-i.length;u>0;u--)c.parentNode.insertBefore(i[0].cloneNode(),c.nextSibling);this.element=document.querySelectorAll(this.config.selector),i=this.element}s.map(c=>c.id).forEach((c,u)=>{const f=`.${S.target}-${c}`,P=r.main.selectAll(f);let m=i[u].querySelector("svg");m||(i[u].innerHTML=`${o}</svg>`,m=i[u].querySelector("svg"),m.__id=c),m.querySelector(f)||P.style("opacity",null),P.style("fill","none").style("opacity",null),m.innerHTML="",m.appendChild(P.node())})}$willDestroy(){this.bindEvents(!1),this.element.forEach(t=>{t.innerHTML=""})}}A(B,"version","0.0.1")}(),v=v.default,v}()});
